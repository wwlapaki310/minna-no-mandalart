Ly8gU3VwYWJhc2XoqK3lrprjgpLjgqTjg7Pjg53jg7zjg4gKaW1wb3J0IHsgZ2V0TWFuZGFsYXJ0
LCBzdWJtaXREZWxldGVSZXF1ZXN0LCBpbmNyZW1lbnRMaWtlQ291bnQsIGRlY3JlbWVudExpa2VD
b3VudCB9IGZyb20gJy4vc3VwYWJhc2UtY29uZmlnLmpzJzsKCi8vID09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8g44Kw44Ot44O844OQ44Or5aSJ5pWwCi8vID09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8vIExvY2FsU3RvcmFn
ZSDjgq3jg7wKY29uc3QgTElLRURfTUFOREFMQVJUU19LRVkgPSAnbGlrZWRNYW5kYWxhcnRzJzsK
Ci8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8g44GE44GE44Gt
566h55CG77yITG9jYWxTdG9yYWdl77yJCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0KCmZ1bmN0aW9uIGdldExpa2VkTWFuZGFsYXJ0cygpIHsKICAgIGNvbnN0IGxp
a2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTElLRURfTUFOREFMQVJUU19LRVkpOwogICAgcmV0
dXJuIGxpa2VkID8gSlNPTi5wYXJzZShsaWtlZCkgOiBbXTsKfQoKZnVuY3Rpb24gaXNMaWtlZCht
YW5kYWxhcnRJZCkgewogICAgY29uc3QgbGlrZWQgPSBnZXRMaWtlZE1hbmRhbGFydHMoKTsKICAg
IHJldHVybiBsaWtlZC5pbmNsdWRlcyhtYW5kYWxhcnRJZCk7Cn0KCmZ1bmN0aW9uIGFkZExpa2Uo
bWFuZGFsYXJ0SWQpIHsKICAgIGNvbnN0IGxpa2VkID0gZ2V0TGlrZWRNYW5kYWxhcnRzKCk7CiAg
ICBpZiAoIWxpa2VkLmluY2x1ZGVzKG1hbmRhbGFydElkKSkgewogICAgICAgIGxpa2VkLnB1c2go
bWFuZGFsYXJ0SWQpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExJS0VEX01BTkRBTEFS
VFNfS0VZLCBKU09OLnN0cmluZ2lmeShsaWtlZCkpOwogICAgfQp9CgpmdW5jdGlvbiByZW1vdmVM
aWtlKG1hbmRhbGFydElkKSB7CiAgICBsZXQgbGlrZWQgPSBnZXRMaWtlZE1hbmRhbGFydHMoKTsK
ICAgIGxpa2VkID0gbGlrZWQuZmlsdGVyKGlkID0+IGlkICE9PSBtYW5kYWxhcnRJZCk7CiAgICBs
b2NhbFN0b3JhZ2Uuc2V0SXRlbShMSUtFRF9NQU5EQUxBUlRTX0tFWSwgSlNPTi5zdHJpbmdpZnko
bGlrZWQpKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQov
LyDjgYTjgYTjga3mqZ/og70KLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQoKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZUxpa2UoKSB7CiAgICBjb25zdCBtYW5k
YWxhcnRJZCA9IHdpbmRvdy5jdXJyZW50TWFuZGFsYXJ0SWQ7CiAgICAKICAgIGlmICghbWFuZGFs
YXJ0SWQpIHsKICAgICAgICBhbGVydCgn44Oe44Oz44OA44Op44O844OISUTjgYzopovjgaTjgYvj
gorjgb7jgZvjgpMnKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGNvbnN0IGxpa2VC
dG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlrZS1idG4nKTsKICAgIGNvbnN0IGxpa2VJ
Y29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpa2UtaWNvbicpOwogICAgY29uc3QgbGlr
ZUNvdW50TWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaWtlLWNvdW50Jyk7CiAgICBj
b25zdCBsaWtlQ291bnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlrZS1jb3VudC1i
dG4nKTsKICAgIAogICAgdHJ5IHsKICAgICAgICBpZiAoaXNMaWtlZChtYW5kYWxhcnRJZCkpIHsK
ICAgICAgICAgICAgLy8g44GE44GE44Gt5Y+W44KK5raI44GXCiAgICAgICAgICAgIGF3YWl0IGRl
Y3JlbWVudExpa2VDb3VudChtYW5kYWxhcnRJZCk7CiAgICAgICAgICAgIHJlbW92ZUxpa2UobWFu
ZGFsYXJ0SWQpOwogICAgICAgICAgICBsaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2xpa2VkJyk7
CiAgICAgICAgICAgIGxpa2VJY29uLnRleHRDb250ZW50ID0gJ+KdpO+4jyc7CiAgICAgICAgICAg
IAogICAgICAgICAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWF4KDAsIHBhcnNlSW50KGxpa2VD
b3VudEJ0bi50ZXh0Q29udGVudCkgLSAxKTsKICAgICAgICAgICAgbGlrZUNvdW50TWV0YS50ZXh0
Q29udGVudCA9IG5ld0NvdW50OwogICAgICAgICAgICBsaWtlQ291bnRCdG4udGV4dENvbnRlbnQg
PSBuZXdDb3VudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDjgYTjgYTjga3jgZnjgosK
ICAgICAgICAgICAgYXdhaXQgaW5jcmVtZW50TGlrZUNvdW50KG1hbmRhbGFydElkKTsKICAgICAg
ICAgICAgYWRkTGlrZShtYW5kYWxhcnRJZCk7CiAgICAgICAgICAgIGxpa2VCdG4uY2xhc3NMaXN0
LmFkZCgnbGlrZWQnKTsKICAgICAgICAgICAgbGlrZUljb24udGV4dENvbnRlbnQgPSAn8J+Slyc7
CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBuZXdDb3VudCA9IHBhcnNlSW50KGxpa2VD
b3VudEJ0bi50ZXh0Q29udGVudCkgKyAxOwogICAgICAgICAgICBsaWtlQ291bnRNZXRhLnRleHRD
b250ZW50ID0gbmV3Q291bnQ7CiAgICAgICAgICAgIGxpa2VDb3VudEJ0bi50ZXh0Q29udGVudCA9
IG5ld0NvdW50OwogICAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29s
ZS5lcnJvcign44GE44GE44Gt5Yem55CG44Ko44Op44O8OicsIGVycm9yKTsKICAgICAgICBhbGVy
dCgn44GE44GE44Gt5Yem55CG44Gr5aSx5pWX44GX44G+44GX44Gf44CCJyk7CiAgICB9Cn0KCi8v
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8g5Yid5pyf5YyWCi8v
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRvY3VtZW50LmFkZEV2
ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7CiAgICBsb2FkTWFuZGFsYXJ0
KCk7Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyDj
g57jg7Pjg4Djg6njg7zjg4joqq3jgb/ovrzjgb8KLy8gPT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PQoKYXN5bmMgZnVuY3Rpb24gbG9hZE1hbmRhbGFydCgpIHsKICAgIC8v
IFVSTOODK+ODqeODoeODvOOCv+OBi+OCiUlE44KS5Y+W5b6XCiAgICBjb25zdCB1cmxQYXJhbXMg
PSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOwogICAgY29uc3Qg
bWFuZGFsYXJ0SWQgPSB1cmxQYXJhbXMuZ2V0KCdpZCcpOwogICAgCiAgICBsZXQgZGF0YTsKICAg
IGxldCB1c2VyTmFtZSA9ICfljL/lkI3jgZXjgpMnOyAgLy8g44OH44OV44Kp44Or44OI5YCkCiAg
ICBsZXQgb2dJbWFnZVVybCA9ICcnOyAgLy8gT0fnlLvlg49VUkwKICAgIGxldCBsaWtlQ291bnQg
PSAwOyAgLy8g44GE44GE44Gt5pWwCiAgICAKICAgIGlmIChtYW5kYWxhcnRJZCkgewogICAgICAg
IC8vIFN1cGFiYXNl44GL44KJ44OH44O844K/44KSSUTlj5blvpcKICAgICAgICB0cnkgewogICAg
ICAgICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2XjgYvjgonjg4fjg7zjgr/lj5blvpfkuK0uLi4n
LCBtYW5kYWxhcnRJZCk7CiAgICAgICAgICAgIGNvbnN0IG1hbmRhbGFydCA9IGF3YWl0IGdldE1h
bmRhbGFydChtYW5kYWxhcnRJZCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTdXBhYmFz
ZeOBruODh+ODvOOCv+W9ouW8j+OBi+OCieWkieaPmwogICAgICAgICAgICBkYXRhID0gewogICAg
ICAgICAgICAgICAgY2VudGVyOiBtYW5kYWxhcnQuY2VudGVyLAogICAgICAgICAgICAgICAgdGhl
bWVzOiBtYW5kYWxhcnQudGhlbWVzLAogICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBtYW5kYWxh
cnQuY3JlYXRlZF9hdAogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g
44Om44O844K244O85ZCN44KS5Y+W5b6XCiAgICAgICAgICAgIHVzZXJOYW1lID0gbWFuZGFsYXJ0
LnVzZXJfZGlzcGxheV9uYW1lIHx8ICfljL/lkI3jgZXjgpMnOwogICAgICAgICAgICAKICAgICAg
ICAgICAgLy8gT0fnlLvlg49VUkzjgpLlj5blvpcKICAgICAgICAgICAgb2dJbWFnZVVybCA9IG1h
bmRhbGFydC5vZ19pbWFnZV91cmwgfHwgJyc7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDj
gYTjgYTjga3mlbDjgpLlj5blvpcKICAgICAgICAgICAgbGlrZUNvdW50ID0gbWFuZGFsYXJ0Lmxp
a2VfY291bnQgfHwgMDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfjg4fj
g7zjgr/lj5blvpfmiJDlip86JywgZGF0YSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPR+eU
u+WDj1VSTDonLCBvZ0ltYWdlVXJsKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+OBhOOBhOOB
reaVsDonLCBsaWtlQ291bnQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gT0dQ44Oh44K/
44K/44Kw44KS5pu05pawCiAgICAgICAgICAgIHVwZGF0ZU9HUE1ldGFUYWdzKGRhdGEuY2VudGVy
LCB1c2VyTmFtZSwgb2dJbWFnZVVybCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDjgYTj
gYTjga3jg5zjgr/jg7Pjga7nirbmhYvjgpLoqK3lrpoKICAgICAgICAgICAgdXBkYXRlTGlrZUJ1
dHRvblN0YXRlKG1hbmRhbGFydElkLCBsaWtlQ291bnQpOwogICAgICAgIH0gY2F0Y2ggKGVycm9y
KSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ODh+ODvOOCv+WPluW+l+OCqOODqeODvDon
LCBlcnJvcik7CiAgICAgICAgICAgIGFsZXJ0KCfjg57jg7Pjg4Djg6njg7zjg4jjga7oqq3jgb/o
vrzjgb/jgavlpLHmlZfjgZfjgb7jgZfjgZ8nKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9u
LmhyZWYgPSAnaW5kZXguaHRtbCc7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9
IGVsc2UgewogICAgICAgIC8vIOODleOCqeODvOODq+ODkOODg+OCrzog44Ot44O844Kr44Or44K5
44OI44Os44O844K444GL44KJ44OH44O844K/44KS5Y+W5b6X77yI5b6M5pa55LqS5o+b5oCn77yJ
CiAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnQt
bWFuZGFsYXJ0Jyk7CiAgICAgICAgCiAgICAgICAgaWYgKCFzYXZlZERhdGEpIHsKICAgICAgICAg
ICAgYWxlcnQoJ+ODnuODs+ODgOODqeODvOODiOOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkycpOwog
ICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdjcmVhdGUuaHRtbCc7CiAgICAgICAg
ICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2Uo
c2F2ZWREYXRhKTsKICAgIH0KICAgIAogICAgLy8g44Oh44K/5oOF5aCx44KS6KGo56S6CiAgICBk
b2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFuZGFsYXJ0LXRpdGxlJykudGV4dENvbnRlbnQgPSBk
YXRhLmNlbnRlcjsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyLW5hbWUnKS50ZXh0
Q29udGVudCA9IHVzZXJOYW1lOwogICAgCiAgICBjb25zdCBjcmVhdGVkRGF0ZSA9IG5ldyBEYXRl
KGRhdGEuY3JlYXRlZEF0KTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGVkLWRh
dGUnKS50ZXh0Q29udGVudCA9IAogICAgICAgIGAke2NyZWF0ZWREYXRlLmdldEZ1bGxZZWFyKCl9
LyR7U3RyaW5nKGNyZWF0ZWREYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfS8k
e1N0cmluZyhjcmVhdGVkRGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgIAog
ICAgLy8gOXg544Oe44Oz44OA44Op44O844OI44KS6KGo56S6CiAgICBkaXNwbGF5RnVsbE1hbmRh
bGFydChkYXRhKTsKICAgIAogICAgLy8g44K544Oe44Ob54mI44Gn44Gv55S75YOP44KC55Sf5oiQ
CiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHsKICAgICAgICBnZW5lcmF0ZU1hbmRh
bGFydEltYWdlKGRhdGEpOwogICAgfQogICAgCiAgICAvLyDjgrDjg63jg7zjg5Djg6vjgavkv53l
rZjvvIjnlLvlg4/jg4Djgqbjg7Pjg63jg7zjg4njg7tUd2l0dGVy5oqV56i/44O75YmK6Zmk44Oq
44Kv44Ko44K544OI44O744GE44GE44Gt55So77yJCiAgICB3aW5kb3cuY3VycmVudE1hbmRhbGFy
dERhdGEgPSBkYXRhOwogICAgd2luZG93LmN1cnJlbnRNYW5kYWxhcnRJZCA9IG1hbmRhbGFydElk
OwogICAgd2luZG93LmN1cnJlbnRPR0ltYWdlVXJsID0gb2dJbWFnZVVybDsKfQoKLy8gPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyDjgYTjgYTjga3jg5zjgr/j
g7Pjga7nirbmhYvjgpLmm7TmlrAKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PQoKZnVuY3Rpb24gdXBkYXRlTGlrZUJ1dHRvblN0YXRlKG1hbmRhbGFydElkLCBsaWtl
Q291bnQpIHsKICAgIGNvbnN0IGxpa2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlr
ZS1idG4nKTsKICAgIGNvbnN0IGxpa2VJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xp
a2UtaWNvbicpOwogICAgCiAgICBpZiAoaXNMaWtlZChtYW5kYWxhcnRJZCkpIHsKICAgICAgICBs
aWtlQnRuLmNsYXNzTGlzdC5hZGQoJ2xpa2VkJyk7CiAgICAgICAgbGlrZUljb24udGV4dENvbnRl
bnQgPSAn8J+Slyc7CiAgICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT0KLy8gT0dQ44Oh44K/44K/44Kw5pu05pawCi8vID09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT0KCmZ1bmN0aW9uIHVwZGF0ZU9HUE1ldGFUYWdzKHRpdGxlLCB1
c2VyTmFtZSwgb2dJbWFnZVVybCkgewogICAgY29uc3QgY3VycmVudFVybCA9IHdpbmRvdy5sb2Nh
dGlvbi5ocmVmOwogICAgY29uc3QgZGVzY3JpcHRpb24gPSBgJHt1c2VyTmFtZX3jgZXjgpPjga7n
m67mqJnjgIwke3RpdGxlfeOAjS0g44G/44KT44Gq44Gu44Oe44Oz44OA44Op44O844OI44Gn5L2c
5oiQYDsKICAgIAogICAgLy8gT0dQ44K/44Kw5pu05pawCiAgICBkb2N1bWVudC5nZXRFbGVtZW50
QnlJZCgnb2ctdGl0bGUnKS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBgJHt0aXRsZX0gLSDjgb/j
gpPjgarjga7jg57jg7Pjg4Djg6njg7zjg4hgKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlk
KCdvZy1kZXNjcmlwdGlvbicpLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIGRlc2NyaXB0aW9uKTsK
ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvZy11cmwnKS5zZXRBdHRyaWJ1dGUoJ2NvbnRl
bnQnLCBjdXJyZW50VXJsKTsKICAgIAogICAgaWYgKG9nSW1hZ2VVcmwpIHsKICAgICAgICBkb2N1
bWVudC5nZXRFbGVtZW50QnlJZCgnb2ctaW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBv
Z0ltYWdlVXJsKTsKICAgIH0KICAgIAogICAgLy8gVHdpdHRlciBDYXJk44K/44Kw5pu05pawCiAg
ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHdpdHRlci10aXRsZScpLnNldEF0dHJpYnV0ZSgn
Y29udGVudCcsIGAke3RpdGxlfSAtIOOBv+OCk+OBquOBruODnuODs+ODgOODqeODvOODiGApOwog
ICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R3aXR0ZXItZGVzY3JpcHRpb24nKS5zZXRBdHRy
aWJ1dGUoJ2NvbnRlbnQnLCBkZXNjcmlwdGlvbik7CiAgICAKICAgIGlmIChvZ0ltYWdlVXJsKSB7
CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R3aXR0ZXItaW1hZ2UnKS5zZXRBdHRy
aWJ1dGUoJ2NvbnRlbnQnLCBvZ0ltYWdlVXJsKTsKICAgIH0KICAgIAogICAgLy8gSFRNTOOCv+OC
pOODiOODq+OCguabtOaWsAogICAgZG9jdW1lbnQudGl0bGUgPSBgJHt0aXRsZX0gLSDjgb/jgpPj
garjga7jg57jg7Pjg4Djg6njg7zjg4hgOwp9Ci8vIHJlbWFpbmluZyBjb2RlIG9taXR0ZWQgZm9y
IGJyZXZpdHkuLi4=
